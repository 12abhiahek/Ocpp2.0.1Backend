2025-12-19 16:39:05 INFO  [main] c.o.w.w.Websockets201Application - Starting Websockets201Application v0.0.1-SNAPSHOT using Java 17.0.12 with PID 12984 (E:\websockets201\websockets201\target\websockets201-0.0.1-SNAPSHOT.jar started by lenovo in E:\websockets201)
2025-12-19 16:39:06 INFO  [main] c.o.w.w.Websockets201Application - No active profile set, falling back to 1 default profile: "default"
2025-12-19 16:39:13 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19 16:39:14 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 365 ms. Found 6 JPA repository interfaces.
2025-12-19 16:39:19 INFO  [main] o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-12-19 16:39:19 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-12-19 16:39:19 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-19 16:39:19 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-19 16:39:19 INFO  [main] o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 12956 ms
2025-12-19 16:39:28 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19 16:39:29 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-19 16:39:30 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4f2b1e9f
2025-12-19 16:39:30 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-19 16:39:39 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19 16:39:39 INFO  [main] o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-19 16:41:26 WARN  [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m55s484ms642µs700ns).
2025-12-19 16:42:40 INFO  [main] c.o.w.w.config.WebSocketConfig - WebSocketConfig: Registered OCPP WebSocket handler ws://localhost:8081/ocpp2/v201/{stationId}
2025-12-19 16:42:40 DEBUG [main] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ocpp/v201/{cpId}] in 'webSocketHandlerMapping'
2025-12-19 16:42:42 WARN  [main] o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-19 16:42:42 INFO  [main] o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-12-19 16:42:43 DEBUG [main] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-12-19 16:42:43 DEBUG [main] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-19 16:42:44 DEBUG [main] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-19 16:42:45 DEBUG [main] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-19 16:42:45 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-12-19 16:42:46 INFO  [main] o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-12-19 16:42:46 INFO  [main] c.o.w.w.Websockets201Application - Started Websockets201Application in 223.902 seconds (process running for 229.864)
2025-12-19 16:42:46 INFO  [main] c.o.w.w.config.OpenLogOnStart - Log file opened in Notepad at startup.
2025-12-19 16:42:59 INFO  [http-nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19 16:42:59 INFO  [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7212d3df
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6dcb4f30
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-19 16:42:59 INFO  [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - GET "/ocpp/v201/ch015", parameters={}
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@5aff8207
2025-12-19 16:42:59 DEBUG [http-nio-8081-exec-1] o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ocpp/v201/ch015
2025-12-19 16:43:00 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-12-19 16:43:00 DEBUG [http-nio-8081-exec-1] o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=1a791ce3-63bc-6e72-25f2-6629eb2d7332, uri=ws://localhost:8081/ocpp/v201/ch015]
2025-12-19 16:43:00 INFO  [http-nio-8081-exec-1] c.o.w.w.handler.OcppWebSocketHandler - WS: Connection established from CP id=ch015
2025-12-19 16:43:03 INFO  [http-nio-8081-exec-1] c.o.w.w.h.BootNotificationHandler - BootNotification from ch015 vendor=OCPP Simulator model=Virtual-CP-2.0.1
2025-12-19 16:43:29 INFO  [http-nio-8081-exec-2] c.o.w.w.handler.AuthorizeHandler - Authorize → idToken=tag490
2025-12-19 16:43:53 WARN  [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=46s343ms685µs300ns).
2025-12-19 16:44:36 INFO  [http-nio-8081-exec-3] c.o.w.w.h.TransactionEventHandler - TransactionEvent → type=Started cpId=1 meterValue=0.0
2025-12-19 16:44:36 INFO  [SpringApplicationShutdownHook] o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-19 16:44:37 INFO  [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-19 16:44:37 DEBUG [http-nio-8081-exec-3] o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in StandardWebSocketSession[id=1a791ce3-63bc-6e72-25f2-6629eb2d7332, uri=ws://localhost:8081/ocpp/v201/ch015]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:329)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:269)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:777)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:574)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:309)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:269)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:253)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:226)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:206)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:106)
	at com.ocpp201.websocket.websockets201.handler.TransactionEventHandler.handle(TransactionEventHandler.java:224)
	at com.ocpp201.websocket.websockets201.routing.MessageRouter.route(MessageRouter.java:56)
	at com.ocpp201.websocket.websockets201.handler.OcppWebSocketHandler.handleTextMessage(OcppWebSocketHandler.java:56)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:392)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:486)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:286)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1674)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:986)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1357)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1286)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1261)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:167)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:524)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:316)
	... 38 common frames omitted
2025-12-19 16:44:38 WARN  [http-nio-8081-exec-3] c.o.w.w.handler.OcppWebSocketHandler - WS: Transport warning CP=ch015 reason=java.nio.channels.ClosedChannelException
2025-12-19 16:44:38 DEBUG [http-nio-8081-exec-3] o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=1a791ce3-63bc-6e72-25f2-6629eb2d7332, uri=ws://localhost:8081/ocpp/v201/ch015] closed with CloseStatus[code=1006, reason=The current thread was interrupted while waiting for a blocking send to complete]
2025-12-19 16:44:38 INFO  [http-nio-8081-exec-3] c.o.w.w.handler.OcppWebSocketHandler - WS: Connection closed from CP id=ch015 status=CloseStatus[code=1006, reason=The current thread was interrupted while waiting for a blocking send to complete]
2025-12-19 16:44:38 ERROR [http-nio-8081-exec-3] c.o.w.w.routing.MessageRouter - Error routing message: [2,"b79466c0-2da2-4a1c-9e09-ab83c5524e01","TransactionEvent",{"eventType":"Started","timestamp":"2025-12-19T11:13:35.835Z","triggerReason":"Authorized","seqNo":0,"idToken":{"idToken":"tag490","type":"ISO14443"},"evse":{"id":1,"connectorId":1},"meterValue":[{"timestamp":"2025-12-19T11:13:35.835Z","sampledValue":[{"value":0,"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"}}]}]}]
java.io.IOException: The current thread was interrupted while waiting for a blocking send to complete
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:311)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:269)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:253)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:226)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:206)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:106)
	at com.ocpp201.websocket.websockets201.handler.TransactionEventHandler.handle(TransactionEventHandler.java:224)
	at com.ocpp201.websocket.websockets201.routing.MessageRouter.route(MessageRouter.java:56)
	at com.ocpp201.websocket.websockets201.handler.OcppWebSocketHandler.handleTextMessage(OcppWebSocketHandler.java:56)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:392)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:486)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:286)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1081)
	at java.base/java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:415)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.acquireMessagePartInProgressSemaphore(WsRemoteEndpointImplBase.java:358)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.acquireMessagePartInProgressSemaphore(WsRemoteEndpointImplServer.java:115)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:301)
	... 34 common frames omitted
2025-12-19 16:44:38 DEBUG [http-nio-8081-exec-3] o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in StandardWebSocketSession[id=1a791ce3-63bc-6e72-25f2-6629eb2d7332, uri=ws://localhost:8081/ocpp/v201/ch015]
java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1293)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1223)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:74)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-19 16:44:38 WARN  [http-nio-8081-exec-3] c.o.w.w.handler.OcppWebSocketHandler - WS: Transport warning CP=ch015 reason=null
2025-12-19 16:44:38 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19 16:44:38 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-19 16:44:38 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-19 16:46:41 INFO  [main] c.o.w.w.Websockets201Application - Starting Websockets201Application v0.0.1-SNAPSHOT using Java 17.0.12 with PID 10660 (E:\websockets201\websockets201\target\websockets201-0.0.1-SNAPSHOT.jar started by lenovo in E:\websockets201)
2025-12-19 16:46:41 INFO  [main] c.o.w.w.Websockets201Application - No active profile set, falling back to 1 default profile: "default"
2025-12-19 16:46:47 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19 16:46:48 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 331 ms. Found 6 JPA repository interfaces.
2025-12-19 16:46:52 INFO  [main] o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-12-19 16:46:52 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-12-19 16:46:52 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-19 16:46:52 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-19 16:46:52 INFO  [main] o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 10250 ms
2025-12-19 16:46:59 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19 16:46:59 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-19 16:47:01 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@79135a38
2025-12-19 16:47:01 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-19 16:47:09 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19 16:47:09 INFO  [main] o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-19 16:50:25 INFO  [main] c.o.w.w.config.WebSocketConfig - WebSocketConfig: Registered OCPP WebSocket handler ws://localhost:8081/ocpp2/v201/{stationId}
2025-12-19 16:50:25 DEBUG [main] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ocpp/v201/{cpId}] in 'webSocketHandlerMapping'
2025-12-19 16:50:26 WARN  [main] o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-19 16:50:26 INFO  [main] o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-12-19 16:50:27 DEBUG [main] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-12-19 16:50:27 DEBUG [main] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-19 16:50:27 DEBUG [main] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-19 16:50:28 DEBUG [main] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-19 16:50:29 INFO  [main] o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-12-19 16:50:30 INFO  [SpringApplicationShutdownHook] o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-19 16:50:30 INFO  [main] c.o.w.w.Websockets201Application - Started Websockets201Application in 231.976 seconds (process running for 234.781)
2025-12-19 16:50:30 INFO  [main] c.o.w.w.config.OpenLogOnStart - Log file opened in Notepad at startup.
2025-12-19 16:50:30 INFO  [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-19 16:50:30 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19 16:50:30 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-19 16:50:30 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-19 16:50:37 INFO  [main] c.o.w.w.Websockets201Application - Starting Websockets201Application v0.0.1-SNAPSHOT using Java 17.0.12 with PID 16736 (E:\websockets201\websockets201\target\websockets201-0.0.1-SNAPSHOT.jar started by lenovo in E:\websockets201)
2025-12-19 16:50:37 INFO  [main] c.o.w.w.Websockets201Application - No active profile set, falling back to 1 default profile: "default"
2025-12-19 16:50:43 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19 16:50:44 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 321 ms. Found 6 JPA repository interfaces.
2025-12-19 16:50:50 INFO  [main] o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-12-19 16:50:50 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-12-19 16:50:50 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-19 16:50:50 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-19 16:50:51 INFO  [main] o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 13254 ms
2025-12-19 16:51:00 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19 16:51:00 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-19 16:51:03 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@674e4c82
2025-12-19 16:51:03 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-19 16:51:12 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19 16:51:12 INFO  [main] o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-19 16:51:29 INFO  [main] c.o.w.w.config.WebSocketConfig - WebSocketConfig: Registered OCPP WebSocket handler ws://localhost:8081/ocpp2/v201/{stationId}
2025-12-19 16:51:29 DEBUG [main] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ocpp/v201/{cpId}] in 'webSocketHandlerMapping'
2025-12-19 16:51:30 WARN  [main] o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-19 16:51:30 INFO  [main] o.s.v.b.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-12-19 16:51:31 DEBUG [main] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-12-19 16:51:31 DEBUG [main] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-19 16:51:32 DEBUG [main] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-19 16:51:32 DEBUG [main] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-19 16:51:33 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-12-19 16:51:33 INFO  [main] o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-12-19 16:51:33 INFO  [main] c.o.w.w.Websockets201Application - Started Websockets201Application in 59.891 seconds (process running for 62.991)
2025-12-19 16:51:33 INFO  [main] c.o.w.w.config.OpenLogOnStart - Log file opened in Notepad at startup.
2025-12-19 16:52:18 INFO  [http-nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19 16:52:18 INFO  [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@191cf38f
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@611ffa8d
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-19 16:52:18 INFO  [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - GET "/ocpp/v201/ch015", parameters={}
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@149ef64a
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ocpp/v201/ch015
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-12-19 16:52:18 DEBUG [http-nio-8081-exec-1] o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=c6a3e099-d6d0-36b9-985e-07faae66e14a, uri=ws://localhost:8081/ocpp/v201/ch015]
2025-12-19 16:52:18 INFO  [http-nio-8081-exec-1] c.o.w.w.handler.OcppWebSocketHandler - WS: Connection established from CP id=ch015
2025-12-19 16:52:21 INFO  [http-nio-8081-exec-1] c.o.w.w.h.BootNotificationHandler - BootNotification from ch015 vendor=OCPP Simulator model=Virtual-CP-2.0.1
2025-12-19 16:52:21 INFO  [http-nio-8081-exec-2] c.o.w.w.h.StatusNotificationHandler - StatusNotification from ch015 status=Available
2025-12-19 16:53:14 INFO  [http-nio-8081-exec-4] c.o.w.w.handler.AuthorizeHandler - Authorize → idToken=tag490
2025-12-19 16:53:58 INFO  [http-nio-8081-exec-5] c.o.w.w.h.TransactionEventHandler - TransactionEvent → type=Started evseId=2 meterValue=0.0
2025-12-19 16:54:50 INFO  [http-nio-8081-exec-5] c.o.w.w.h.TransactionEventHandler - STARTED → assigned txId=30 evseId=2 meterStart=0.0
2025-12-19 16:56:33 WARN  [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m15s748ms129µs401ns).
2025-12-19 16:56:33 INFO  [http-nio-8081-exec-5] c.o.w.w.h.StatusNotificationHandler - StatusNotification from ch015 status=Charging
2025-12-19 16:56:33 INFO  [http-nio-8081-exec-5] c.o.w.w.h.StatusNotificationHandler - StatusNotification from ch015 status=Finishing
2025-12-19 16:56:33 INFO  [http-nio-8081-exec-5] c.o.w.w.h.TransactionEventHandler - TransactionEvent → type=Ended evseId=2 meterValue=208.0
2025-12-19 16:56:33 INFO  [SpringApplicationShutdownHook] o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-19 16:56:33 INFO  [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-19 16:56:33 ERROR [http-nio-8081-exec-5] c.o.w.w.h.TransactionEventHandler - Failed to convert MeterValue header
java.lang.IllegalStateException: ChargeBox not found: 2. BootNotification must be processed first.
	at com.ocpp201.websocket.websockets201.service.ConnectorService.lambda$getOrCreateConnectorPk$0(ConnectorService.java:52)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.ocpp201.websocket.websockets201.service.ConnectorService.getOrCreateConnectorPk(ConnectorService.java:51)
	at com.ocpp201.websocket.websockets201.service.MeterValueService.saveMeterHeader(MeterValueService.java:205)
	at com.ocpp201.websocket.websockets201.handler.TransactionEventHandler.saveMeterHeaders(TransactionEventHandler.java:364)
	at com.ocpp201.websocket.websockets201.handler.TransactionEventHandler.handleEnded(TransactionEventHandler.java:314)
	at com.ocpp201.websocket.websockets201.handler.TransactionEventHandler.handle(TransactionEventHandler.java:238)
	at com.ocpp201.websocket.websockets201.routing.MessageRouter.route(MessageRouter.java:56)
	at com.ocpp201.websocket.websockets201.handler.OcppWebSocketHandler.handleTextMessage(OcppWebSocketHandler.java:56)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:392)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:486)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:286)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-19 16:56:33 INFO  [http-nio-8081-exec-5] c.o.w.w.h.TransactionEventHandler - ENDED → txId=30 evseId=0.208 energy=2 kWh
2025-12-19 16:56:33 DEBUG [http-nio-8081-exec-5] o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in StandardWebSocketSession[id=c6a3e099-d6d0-36b9-985e-07faae66e14a, uri=ws://localhost:8081/ocpp/v201/ch015]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:329)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:269)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:777)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:574)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:309)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:269)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:253)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:226)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:206)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:106)
	at com.ocpp201.websocket.websockets201.handler.TransactionEventHandler.handle(TransactionEventHandler.java:244)
	at com.ocpp201.websocket.websockets201.routing.MessageRouter.route(MessageRouter.java:56)
	at com.ocpp201.websocket.websockets201.handler.OcppWebSocketHandler.handleTextMessage(OcppWebSocketHandler.java:56)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:392)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:486)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:286)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1674)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:986)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1357)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1286)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1261)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:167)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:524)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:316)
	... 38 common frames omitted
2025-12-19 16:56:33 WARN  [http-nio-8081-exec-5] c.o.w.w.handler.OcppWebSocketHandler - WS: Transport warning CP=ch015 reason=java.nio.channels.ClosedChannelException
2025-12-19 16:56:33 DEBUG [http-nio-8081-exec-5] o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=c6a3e099-d6d0-36b9-985e-07faae66e14a, uri=ws://localhost:8081/ocpp/v201/ch015] closed with CloseStatus[code=1006, reason=The current thread was interrupted while waiting for a blocking send to complete]
2025-12-19 16:56:33 INFO  [http-nio-8081-exec-5] c.o.w.w.handler.OcppWebSocketHandler - WS: Connection closed from CP id=ch015 status=CloseStatus[code=1006, reason=The current thread was interrupted while waiting for a blocking send to complete]
2025-12-19 16:56:33 ERROR [http-nio-8081-exec-5] c.o.w.w.routing.MessageRouter - Error routing message: [2,"103a6599-2c4e-402d-be78-e3d0cbe43e98","TransactionEvent",{"eventType":"Ended","timestamp":"2025-12-19T11:25:43.770Z","triggerReason":"StopAuthorized","seqNo":3,"transactionInfo":{"transactionId":30,"stoppedReason":"Local"},"idToken":{"idToken":"tag490","type":"ISO14443"},"evse":{"id":2,"connectorId":1},"meterValue":[{"timestamp":"2025-12-19T11:25:43.770Z","sampledValue":[{"value":208,"measurand":"Energy.Active.Import.Register","unitOfMeasure":{"unit":"Wh"}}]}]}]
java.io.IOException: The current thread was interrupted while waiting for a blocking send to complete
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:311)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:269)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:253)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:226)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:206)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:106)
	at com.ocpp201.websocket.websockets201.handler.TransactionEventHandler.handle(TransactionEventHandler.java:244)
	at com.ocpp201.websocket.websockets201.routing.MessageRouter.route(MessageRouter.java:56)
	at com.ocpp201.websocket.websockets201.handler.OcppWebSocketHandler.handleTextMessage(OcppWebSocketHandler.java:56)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:392)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:486)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:286)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1081)
	at java.base/java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:415)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.acquireMessagePartInProgressSemaphore(WsRemoteEndpointImplBase.java:358)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.acquireMessagePartInProgressSemaphore(WsRemoteEndpointImplServer.java:115)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:301)
	... 34 common frames omitted
2025-12-19 16:56:33 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19 16:56:33 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-19 16:56:33 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
